<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gênesis Elétrica | Contagem e Região Metropolitana</title>

<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" type="image/png" href="/icone-ge.png">
<link rel="apple-touch-icon" href="/icone-ge.png">

<link rel="stylesheet" href="/style.css"/>

<style>
  :root{
    --azul:#0a57a3;
    --azul2:#0a57d8;
    --preto:#000;
    --texto:#111;
    --cinza:#eef3f7;
    --rodape-azul:#0a57a3;
    --white:#fff;
  }
  html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;color:var(--texto);background:#fff}
  a{color:var(--azul2);text-decoration:none}
  a:hover{opacity:.9}

  /* ===== HEADER ===== */
  .brand-bar{background:var(--preto);color:#fff;position:sticky;top:0;z-index:1000}
  .brand-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:14px;padding:10px 12px}
  .brand-logo{height:80px;width:auto;flex-shrink:0}
  .brand-title{display:flex;flex-direction:column}
  .brand-title strong{color:#fff;line-height:1;font-size:1.2rem}
  .brand-title span{color:#ffffffcc;font-size:.95rem}

  /* nav azul */
  .nav-bar{background:var(--azul)}
  .nav-inner{max-width:1200px;margin:0 auto;display:flex;justify-content:center;gap:10px;padding:8px 12px}
  .nav-inner a{color:#fff;font-weight:600;letter-spacing:.2px;padding:8px 12px;border-radius:6px}
  .nav-inner a:hover{background:rgba(255,255,255,.12)}

  /* Hamburger (mobile) */
  .hamb{margin-left:auto;border:1px solid rgba(255,255,255,.35);padding:8px 10px;border-radius:8px;background:transparent;color:#fff;display:none;cursor:pointer}
  .hamb .bars{display:block;width:20px;height:2px;background:#fff;position:relative}
  .hamb .bars::before,.hamb .bars::after{content:"";position:absolute;left:0;width:20px;height:2px;background:#fff}
  .hamb .bars::before{top:-6px}
  .hamb .bars::after{top:6px}

  /* Drawer lateral (menu mobile ao estilo do blog) */
  .drawer-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:1100}
  .drawer{position:fixed;top:0;right:0;height:100%;width:78%;max-width:380px;background:#0b0f14;color:#e5ecf3;box-shadow:-6px 0 24px rgba(0,0,0,.35);transform:translateX(100%);transition:transform .28s ease;z-index:1110}
  .drawer.open{transform:translateX(0)}
  .drawer-backdrop.show{display:block}
  .drawer-head{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid rgba(255,255,255,.08)}
  .drawer-head img{height:26px}
  .drawer-close{background:transparent;border:0;color:#fff;font-size:1.4rem;cursor:pointer}
  .drawer-nav a{display:block;padding:14px 18px;border-bottom:1px solid rgba(255,255,255,.06);color:#dce6f2;font-weight:700}
  .drawer-nav a:first-child{color:#4ea0ff}
  .drawer-section{padding:16px;border-top:1px solid rgba(255,255,255,.08)}
  .drawer-section h4{margin:0 0 10px}
  .info-item{display:grid;grid-template-columns:22px 1fr;gap:10px;align-items:start;margin:8px 0}
  .info-item svg{width:18px;height:18px;fill:#a6b4c6;margin-top:2px}
  .drawer-social{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px}
  .drawer-social a{display:flex;align-items:center;justify-content:center;padding:10px 8px;border:1px solid rgba(255,255,255,.12);border-radius:8px;color:#dbe6f3}

  /* Responsividade header */
  @media (max-width:980px){
    .nav-inner{display:none}
    .hamb{display:block}
  }
  @media (max-width:640px){
    .brand-logo{height:68px}
    .brand-title strong{font-size:1.05rem}
    .brand-title span{font-size:.9rem}
  }

  /* ===== HERO e conteúdo base (mantido do seu site) ===== */
  .hero{position:relative}
  .hero img{width:100%;height:auto;display:block}
  .hero-text{position:absolute;left:50%;bottom:20px;transform:translateX(-50%);color:#fff;background:rgba(0,0,0,.45);padding:10px 14px;border-radius:10px}

  .section-title{padding:16px 12px;text-align:center;font-weight:800}
  .form-section{padding:24px 12px}

  /* ===== RODAPÉ (com postagens e contato à direita) ===== */
  .blog-footer{background:var(--rodape-azul);color:#fff;margin-top:24px}
  .bf-inner{max-width:1200px;margin:0 auto;padding:28px 12px}
  .bf-grid{display:grid;grid-template-columns:2fr 1.3fr;gap:28px}
  @media (max-width:900px){.bf-grid{grid-template-columns:1fr}}

  .widget-title{margin:0 0 12px;font-weight:800}
  .rec-list{display:grid;gap:12px}
  .rec-post{display:flex;gap:12px;padding:12px;border-radius:10px;background:rgba(255,255,255,.06)}
  .rec-post img{width:120px;height:82px;object-fit:cover;border-radius:8px;flex-shrink:0}
  .rec-post a{color:#fff;font-weight:700;line-height:1.25}
  .rec-post p{margin:.35rem 0 0;opacity:.93;font-size:.93rem}

  .contact-box{background:rgba(255,255,255,.06);border-radius:10px;padding:14px}
  .contact-box p{margin:0 0 10px}
  .contact-list{display:grid;gap:10px;margin-top:10px}
  .contact-item{display:grid;grid-template-columns:22px 1fr;gap:10px;align-items:start}
  .contact-item svg{width:18px;height:18px;fill:#fff;opacity:.95;margin-top:2px}
  .contact-item a{color:#fff;text-decoration:none}
  .contact-item a:hover{text-decoration:underline}

  .footer-menu{border-top:1px solid rgba(255,255,255,.18);border-bottom:1px solid rgba(255,255,255,.18);margin:22px 0;padding:12px 0;text-align:center}
  .footer-menu a{color:#fff;font-weight:600;margin:0 10px}
  .footer-copy{display:flex;justify-content:space-between;gap:12px;align-items:center}
  .footer-copy small{opacity:.9}
  @media (max-width:640px){.footer-copy{flex-direction:column;align-items:flex-start}}

  /* utilitários do formulário */
  .field{margin-bottom:10px}
  .field.two-cols{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media (max-width:640px){.field.two-cols{grid-template-columns:1fr}}
  .input-error{color:#c0392b;font-size:.85rem}
  .btn-enviar,.btn-urgencia{cursor:pointer}
</style>
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="brand-bar">
  <div class="brand-inner">
    <img src="/icone-ge.png" class="brand-logo" alt="Gênesis Elétrica">
    <div class="brand-title">
      <strong>Gênesis Elétrica</strong>
      <span>Energia com segurança, profissionalismo e excelência</span>
    </div>
    <button class="hamb" id="hambBtn" aria-label="Abrir menu"><span class="bars"></span></button>
  </div>
  <nav class="nav-bar" aria-label="Menu principal">
    <div class="nav-inner">
      <a href="https://genesiseletricablog.com.br/" target="_blank" rel="noopener">Blog</a>
      <a href="#formulario">Serviços</a>
      <a href="#quemsomos">Empresa</a>
      <a href="#localizacao">Localização</a>
      <a href="#blog">Postagem</a>
      <a href="https://genesiseletricablog.com.br/contato/" target="_blank" rel="noopener">Contato</a>
    </div>
  </nav>
</header>

<!-- Drawer mobile -->
<div class="drawer-backdrop" id="drawerBackdrop"></div>
<aside class="drawer" id="drawer" aria-hidden="true">
  <div class="drawer-head">
    <img src="/icone-ge.png" alt="Gênesis">
    <button class="drawer-close" id="drawerClose" aria-label="Fechar">✕</button>
  </div>
  <nav class="drawer-nav" aria-label="Navegação móvel">
    <a href="https://genesiseletricablog.com.br/">Início</a>
    <a href="https://genesiseletricca.com.br/">Site</a>
    <a href="https://genesiseletricablog.com.br/categorias/">Categorias</a>
    <a href="https://genesiseletricablog.com.br/contato/">Contato</a>
  </nav>
  <div class="drawer-section">
    <h4>Informações</h4>
    <div class="info-item">
      <svg viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"/></svg>
      <div><strong>Endereço:</strong> Rua Rio Mantiqueira, 898 - Novo Riacho, Contagem/MG</div>
    </div>
    <div class="info-item">
      <svg viewBox="0 0 24 24"><path d="M2 4h20v16H2V4zm2 2v.2l8 5.2 8-5.2V6l-8 5.2L4 6.2z"/></svg>
      <div><strong>E-mail:</strong> <a href="mailto:genesiseletricca@gmail.com">genesiseletricca@gmail.com</a></div>
    </div>
    <div class="info-item">
      <svg viewBox="0 0 24 24"><path d="M6.6 10.8a15.6 15.6 0 0 0 6.6 6.6l2.2-2.2c.2-.2.5-.3.8-.2 1 .3 2 .5 3 .5.4 0 .8.3.8.8V20c0 .4-.3.8-.8.8C9.3 20.8 3.2 14.7 3.2 7.2c0-.4.3-.8.8-.8H6c.4 0 .8.3.8.8 0 1 .2 2 .5 3 .1.3 0 .6-.2.8L6.6 10.8z"/></svg>
      <div><strong>Telefone/WhatsApp:</strong> <a href="https://wa.me/5531975002129" target="_blank" rel="noopener">(31) 97500-2129</a></div>
    </div>
    <div class="drawer-social">
      <a href="https://instagram.com/genesis_eletrica" target="_blank" rel="noopener">Instagram</a>
      <a href="https://wa.me/5531975002129" target="_blank" rel="noopener">WhatsApp</a>
      <a href="mailto:genesiseletricca@gmail.com">E-mail</a>
      <a href="https://facebook.com" target="_blank" rel="noopener">Facebook</a>
      <a href="https://x.com" target="_blank" rel="noopener">X (Twitter)</a>
      <a href="https://youtube.com" target="_blank" rel="noopener">YouTube</a>
    </div>
  </div>
</aside>

<main>
  <!-- HERO -->
  <section class="hero">
    <img src="QDC-principal.jpg" alt="QDC principal"/>
    <div class="hero-text">Energia com sustentabilidade, profissionalismo, segurança e excelência!</div>
  </section>

  <!-- QUEM SOMOS -->
  <section class="section-title" id="quemsomos">QUEM SOMOS</section>

  <section class="form-section" id="formulario" style="text-align:center;">
    <p style="max-width:900px;margin:0 auto;font-size:1.1em;line-height:1.6;">
      A <strong>Gênesis Elétrica</strong> atua com excelência e comprometimento no setor de instalações elétricas.
      Com experiência e atenção às normas técnicas, oferecemos soluções seguras, modernas e eficientes para residências, comércios e indústrias.
      <br><br><em>“Sua satisfação, nossa missão!”</em><br>______________________________________________
    </p>
  </section>

  <!-- ===== FORMULÁRIOS (mantidos) ===== -->
  <section class="form-section" id="servico">
    <p><strong>SELECIONE O TIPO DE SERVIÇO ELÉTRICO QUE ESTÁ PRECISANDO</strong></p>
    <select id="tipoServico" onchange="preencherTipoServico(this.value)">
      <option value="">Selecione uma opção</option>
      <option value="CLPs / IHMs / SCADA">CLPs / IHMs / SCADA</option>
      <option value="Painéis de comando">Painéis de comando</option>
      <option value="Inversores de frequência">Inversores de frequência</option>
      <option value="Instalação e manutenção em contator, relé térmico, temporizador e falta de fase">Instalação e manutenção em contator, relé térmico, temporizador e falta de fase</option>
      <option value="Elétrica industrial (Outros)">Elétrica industrial (Outros)</option>
      <option value="Painel solar">Painel solar</option>
      <option value="Instalação ou restauração de quadros de distribuição">Instalação ou restauração de quadros de distribuição</option>
      <option value="Instalação elétrica do zero">Instalação elétrica do zero</option>
      <option value="Criação de projeto elétrico residencial e comercial">Criação de projeto elétrico residencial e comercial</option>
      <option value="Sistema de aterramento">Sistema de aterramento</option>
      <option value="Instalação de CVEs – carregadores veiculares elétricos">Instalação de CVEs – carregadores veiculares elétricos</option>
      <option value="Padrão CEMIG">Padrão CEMIG</option>
      <option value="Restauração elétrica">Restauração elétrica</option>
      <option value="Reparação de pontos elétrico">Reparação de pontos elétrico</option>
      <option value="Passagem de fiação">Passagem de fiação</option>
      <option value="Troca de disjuntor, IDR, DPS">Troca de disjuntor, IDR, DPS</option>
      <option value="Instalação e dimensionamento de disjuntor, IDR, DPS">Instalação e dimensionamento de disjuntor, IDR, DPS</option>
      <option value="Manutenção elétrica">Manutenção elétrica</option>
      <option value="Instalação de tomada simples">Instalação de tomada simples</option>
      <option value="Instalação de tomada dupla">Instalação de tomada dupla</option>
      <option value="Instalação de interruptor simples">Instalação de interruptor simples</option>
      <option value="Instalação de interruptor three way">Instalação de interruptor three way</option>
      <option value="Instalação de interruptor four way">Instalação de interruptor four way</option>
      <option value="Instalação de plafon soquete teto">Instalação de plafon soquete teto</option>
      <option value="Instalação de plafon led teto ou parede">Instalação de plafon led teto ou parede</option>
      <option value="Instalação de arandela">Instalação de arandela</option>
      <option value="Iluminação para jardim">Iluminação para jardim</option>
      <option value="Iluminação externa">Iluminação externa</option>
      <option value="Instalação de sinaleiros para jardim ou piscina">Instalação de sinaleiros para jardim ou piscina</option>
      <option value="Instalação de perfil de led">Instalação de perfil de led</option>
      <option value="Instalação de spot">Instalação de spot</option>
      <option value="Instalação de chuveiro">Instalação de chuveiro</option>
      <option value="Instalação de ventilador de parede ou teto">Instalação de ventilador de parede ou teto</option>
      <option value="Preparação e criação de circuito elétrico para ar condicionado">Preparação e criação de circuito elétrico para ar condicionado</option>
      <option value="Outros">Outros</option>
    </select>

    <input id="suporte" type="text" placeholder="Ou digite aqui qual suporte precisa"/>
    <button class="btn-enviar" type="button" onclick="mostrarFormularioPedido()">Enviar pedido</button>
    <div style="margin-top:8px;">
      <img src="alerta.jpg" alt="Serviço de urgência" style="max-height:40px;vertical-align:middle;"/>
      <button class="btn-urgencia" type="button" onclick="abrirUrgencia()">Serviço de urgência</button>
    </div>

    <!-- Pedido normal -->
    <div id="formularioPedido" style="display:none; margin-top:20px;">
      <div class="field"><input id="nome" placeholder="Seu nome" required><small class="input-error" id="err-nome" hidden>Informe seu nome.</small></div>
      <div class="field"><input id="telefone" inputmode="tel" placeholder="Telefone (DDD + número)" required><small class="input-error" id="err-telefone" hidden>Informe um telefone válido.</small></div>
      <div class="field two-cols">
        <div><input id="bairro" placeholder="Bairro" required><small class="input-error" id="err-bairro" hidden>Informe o bairro.</small></div>
        <div><input id="municipio" placeholder="Município" required><small class="input-error" id="err-municipio" hidden>Informe o município.</small></div>
      </div>
      <div class="field"><input id="tipoFinal" placeholder="Tipo de serviço" required><small class="input-error" id="err-tipo" hidden>Selecione ou digite o serviço.</small></div>
      <div class="field"><input id="email" type="email" placeholder="E-mail (opcional)"></div>
      <div class="field"><textarea id="observacao" placeholder="Observação relevante (opcional)" style="height:60px;"></textarea></div>
      <button type="button" class="btn-enviar" onclick="enviarWhatsAppPedido()">Enviar via WhatsApp</button>
    </div>
  </section>

  <!-- Urgência -->
  <section class="form-section" id="formUrgencia" style="display:none; margin-top:10px;">
    <h3 style="margin:0 0 8px;">Atendimento de urgência</h3>
    <div class="field"><input id="u-nome" placeholder="Seu nome" required><small class="input-error" id="u-err-nome" hidden>Informe seu nome.</small></div>
    <div class="field"><input id="u-telefone" inputmode="tel" placeholder="Telefone (DDD + número)" required><small class="input-error" id="u-err-telefone" hidden>Informe um telefone válido.</small></div>
    <div class="field two-cols">
      <div><input id="u-bairro" placeholder="Bairro" required><small class="input-error" id="u-err-bairro" hidden>Informe o bairro.</small></div>
      <div><input id="u-municipio" placeholder="Município" required><small class="input-error" id="u-err-municipio" hidden>Informe o município.</small></div>
    </div>
    <div class="field"><input id="u-tipo" placeholder="Tipo de serviço (urgência)" required><small class="input-error" id="u-err-tipo" hidden>Informe o tipo de serviço.</small></div>
    <div class="field"><textarea id="u-observacao" placeholder="Observação relevante (opcional)" style="height:60px;"></textarea></div>
    <button type="button" class="btn-urgencia" onclick="enviarWhatsAppUrgencia()">Enviar urgência via WhatsApp</button>
  </section>

  <!-- Seções já existentes (serviços / localização / blog) ficam aqui... -->

  <!-- Localização -->
  <section class="section-title" id="localizacao">
    Serviços elétricos em Contagem e região metropolitana - Atendimento 24h - Elétrica residencial, comercial e industrial.
  </section>

  <!-- Blog cards anteriores (se desejar manter) -->
  <section id="blog" class="form-section" style="background:var(--cinza)">
    <h2 style="text-align:center;margin:0 0 16px;">FIQUE POR DENTRO - Clube do eletricista</h2>
    <!-- … seus cards existentes … -->
  </section>
</main>

<!-- ===== RODAPÉ ===== -->
<footer class="blog-footer" id="contato">
  <div class="bf-inner">
    <div class="bf-grid">
      <section>
        <h4 class="widget-title">Postagem recomendada</h4>
        <div class="rec-list">
          <article class="rec-post">
            <img src="carroeletrico.jpg" alt="Veículos elétricos e IA’s">
            <div>
              <a href="https://genesiseletricablog.com.br/carros-eletricos/" target="_blank" rel="noopener">
                Descubra tudo sobre a nova era dos veículos elétricos, IA’s e suas transformações revolucionárias.
              </a>
              <p>Os carros elétricos e IA’s não são mais uma promessa futurística – eles representam a realidade presente da mobilidade sustentável. Com o mercado brasileiro registrando crescimentos expressivos e inovações tecnológicas aceleradas...</p>
            </div>
          </article>
          <article class="rec-post">
            <img src="aterramento.jpg" alt="Aterramento elétrico">
            <div>
              <a href="https://genesiseletricablog.com.br/aterramento/" target="_blank" rel="noopener">
                Aterramento elétrico: Fundamentos do sistema de proteção.
              </a>
              <p>Muitas vezes, a causa desses problemas está na ausência ou na má qualidade de um dos pilares mais fundamentais de proteção de qualquer instalação elétrica: o aterramento...</p>
            </div>
          </article>
        </div>
      </section>

      <section>
        <h4 class="widget-title">Informações de contato</h4>
        <div class="contact-box">
          <p><strong>Gênesis Elétrica</strong> - Nossa equipe é especializada em projetos, manutenções e soluções elétricas para residências, comércios e industrias. Entre em contato e tenha a certeza de um trabalho feito com profissionalismo e responsabilidade.</p>
          <div class="contact-list">
            <div class="contact-item">
              <svg viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7zm0 9.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"/></svg>
              <div>Endereço: Rua Rio Mantiqueira, 898 - Novo Riacho, Contagem/MG</div>
            </div>
            <div class="contact-item">
              <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2zm-1 17.93A8.001 8.001 0 0 1 4.07 13H11v6.93zM13 11V4.07A8.001 8.001 0 0 1 19.93 11H13zM13 13h6.93A8.001 8.001 0 0 1 13 19.93V13zM11 11H4.07A8.001 8.001 0 0 1 11 4.07V11z"/></svg>
              <div>Blog <a href="https://genesiseletricablog.com.br/" target="_blank" rel="noopener">Gênesis elétrica</a></div>
            </div>
            <div class="contact-item">
              <svg viewBox="0 0 24 24"><path d="M12 1.75a10.25 10.25 0 1 0 0 20.5 10.25 10.25 0 0 0 0-20.5zm.75 10.25V6a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 .22.53l3.5 3.5a.75.75 0 0 0 1.06-1.06l-3.28-3.28z"/></svg>
              <div>Horário de funcionamento: Atendimento 24h</div>
            </div>
            <div class="contact-item">
              <svg viewBox="0 0 24 24"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 3.2-8 5.2L4 7.2V6l8 5.2L20 6v1.2z"/></svg>
              <div>E-mail: <a href="mailto:genesiseletricca@gmail.com">genesiseletricca@gmail.com</a></div>
            </div>
            <div class="contact-item">
              <svg viewBox="0 0 24 24"><path d="M6.6 10.8a15.6 15.6 0 0 0 6.6 6.6l2.2-2.2c.2-.2.5-.3.8-.2 1 .3 2 .5 3 .5.4 0 .8.3.8.8V20c0 .4-.3.8-.8.8C9.3 20.8 3.2 14.7 3.2 7.2c0-.4.3-.8.8-.8H6c.4 0 .8.3.8.8 0 1 .2 2 .5 3 .1.3 0 .6-.2.8L6.6 10.8z"/></svg>
              <div>WhatsApp <a href="https://wa.me/5531975002129" target="_blank" rel="noopener">(31) 97500-2129</a></div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="footer-menu">
      <a href="#quemsomos">Quem Somos</a>
      <a href="https://genesiseletricablog.com.br/institucional/" target="_blank" rel="noopener">Institucional</a>
      <a href="https://genesiseletricablog.com.br/politica-de-privacidade/" target="_blank" rel="noopener">Política de Privacidade</a>
      <a href="https://genesiseletricablog.com.br/contato/" target="_blank" rel="noopener">Contato</a>
    </div>
    <div class="footer-copy">
      <small>© 2025 Gênesis Elétrica — Energia com segurança, profissionalismo e excelência.</small>
      <small>Contagem e Região Metropolitana • Atendimento 24h</small>
    </div>
  </div>
</footer>

<!-- ===== JS ===== -->
<script>
  /* Drawer mobile */
  const hamb = document.getElementById('hambBtn');
  const drawer = document.getElementById('drawer');
  const backdrop = document.getElementById('drawerBackdrop');
  const closeBtn = document.getElementById('drawerClose');

  function openDrawer(){
    drawer.classList.add('open');
    backdrop.classList.add('show');
    drawer.setAttribute('aria-hidden','false');
  }
  function closeDrawer(){
    drawer.classList.remove('open');
    backdrop.classList.remove('show');
    drawer.setAttribute('aria-hidden','true');
  }
  hamb?.addEventListener('click', openDrawer);
  closeBtn?.addEventListener('click', closeDrawer);
  backdrop?.addEventListener('click', closeDrawer);
  window.addEventListener('keydown', e=>{ if(e.key==='Escape') closeDrawer(); });

  /* Form fill */
  function preencherTipoServico(valor){
    const campo = document.getElementById('tipoFinal');
    if (!campo) return;
    campo.value = valor || document.getElementById('suporte').value || '';
  }
  function mostrarFormularioPedido(){
    document.getElementById('formularioPedido').style.display='block';
    document.getElementById('formUrgencia').style.display='none';
    preencherTipoServico(document.getElementById('tipoServico').value);
  }
  function abrirUrgencia(){
    document.getElementById('formUrgencia').style.display='block';
    document.getElementById('formularioPedido').style.display='none';
  }

  /* Máscara/validação telefone BR */
  function maskPhoneBR(v){
    v=v.replace(/\D/g,''); if(v.length>11) v=v.slice(0,11);
    if(v.length>=3) v='('+v.slice(0,2)+') '+v.slice(2);
    if(v.length>=10) v=v.replace(/(\d)(\d{4})$/,'$1-$2');
    return v;
  }
  function isValidPhoneBR(v){const d=v.replace(/\D/g,'');return d.length===10||d.length===11;}
  document.getElementById('telefone')?.addEventListener('input',e=>e.target.value=maskPhoneBR(e.target.value));
  document.getElementById('u-telefone')?.addEventListener('input',e=>e.target.value=maskPhoneBR(e.target.value));

  /* WhatsApp robusto */
  function openWhatsApp(numero,texto){
    const enc=encodeURIComponent(texto);
    const url1=`https://wa.me/${numero}?text=${enc}`;
    const url2=`https://api.whatsapp.com/send?phone=${numero}&text=${enc}`;
    try{window.location.href=url1;}catch(e){}
    setTimeout(()=>{window.open(url2,'_blank','noopener');},700);
  }
  function montarTexto(titulo,d){
    return `*${titulo}*\n\nNome: ${d.nome}\nTelefone: ${d.telefone}\nBairro: ${d.bairro}\nMunicípio: ${d.municipio}\n`+
           (d.tipo?`Tipo de serviço: ${d.tipo}\n`:'')+(d.email?`E-mail: ${d.email}\n`:'')+
           `Observação: ${d.obs||'(sem observações)'}\nFonte: Formulário do site (${d.origem})`;
  }

  function enviarWhatsAppPedido(){
    const nome=document.getElementById('nome').value.trim();
    const telefone=document.getElementById('telefone').value.trim();
    const bairro=document.getElementById('bairro').value.trim();
    const municipio=document.getElementById('municipio').value.trim();
    const tipo=(document.getElementById('tipoFinal').value||'').trim();
    const email=document.getElementById('email').value.trim();
    const obs=document.getElementById('observacao').value.trim();

    let ok=true;
    document.getElementById('err-nome').hidden=!!nome; if(!nome) ok=false;
    document.getElementById('err-telefone').hidden=isValidPhoneBR(telefone); if(!isValidPhoneBR(telefone)) ok=false;
    document.getElementById('err-bairro').hidden=!!bairro; if(!bairro) ok=false;
    document.getElementById('err-municipio').hidden=!!municipio; if(!municipio) ok=false;
    document.getElementById('err-tipo').hidden=!!tipo; if(!tipo) ok=false;
    if(!ok) return;

    const texto=montarTexto(`Pedido de serviço – ${tipo}`,{nome,telefone,bairro,municipio,tipo,email,obs,origem:'Pedido'});
    openWhatsApp('5531975002129',texto);
  }

  function enviarWhatsAppUrgencia(){
    const nome=document.getElementById('u-nome').value.trim();
    const telefone=document.getElementById('u-telefone').value.trim();
    const bairro=document.getElementById('u-bairro').value.trim();
    const municipio=document.getElementById('u-municipio').value.trim();
    const tipo=document.getElementById('u-tipo').value.trim();
    const obs=document.getElementById('u-observacao').value.trim();

    let ok=true;
    document.getElementById('u-err-nome').hidden=!!nome; if(!nome) ok=false;
    document.getElementById('u-err-telefone').hidden=isValidPhoneBR(telefone); if(!isValidPhoneBR(telefone)) ok=false;
    document.getElementById('u-err-bairro').hidden=!!bairro; if(!bairro) ok=false;
    document.getElementById('u-err-municipio').hidden=!!municipio; if(!municipio) ok=false;
    document.getElementById('u-err-tipo').hidden=!!tipo; if(!tipo) ok=false;
    if(!ok) return;

    const texto=montarTexto(`URGÊNCIA – ${tipo}`,{nome,telefone,bairro,municipio,tipo,email:'',obs,origem:'Urgência'});
    openWhatsApp('5531975002129',texto);
  }
</script>
</body>
</html>
