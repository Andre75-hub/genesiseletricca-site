<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formulário de Serviço - Gênesis Elétrica</title>
  <style>
    /* Estilo básico para o formulário incorporado */
    body {
      font-family: Arial, sans-serif;
      background-color: #fdfdfd;
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .service-selector {
      margin-bottom: 20px;
    }
    .service-selector label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
    }
    .service-selector select,
    .service-selector input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 0.95rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    .buttons {
      margin-bottom: 20px;
    }
    .primary {
      background-color: #b6943f;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 4px;
    }
    .primary:hover {
      background-color: #997c35;
    }
    .urgent {
      background-color: #d9534f;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 4px;
      margin-left: 10px;
    }
    .urgent:hover {
      background-color: #c9302c;
    }
    .form-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #eee;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .form-group {
      margin-bottom: 15px;
      position: relative;
    }
    .form-group label {
      display: block;
      margin-bottom: 4px;
      font-weight: bold;
    }
    /* Adiciona um asterisco vermelho aos campos obrigatórios */
    .form-group label.required::after {
      content: " *";
      color: #d9534f;
    }
    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 8px;
      font-size: 0.95rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }
    .form-group input.invalid,
    .form-group textarea.invalid {
      border-color: #d9534f;
    }
    .error-message {
      color: #d9534f;
      font-size: 0.8rem;
      margin-top: 4px;
      min-height: 14px;
    }
    .floating-urgent {
      position: fixed;
      right: 20px;
      bottom: 30px;
      background-color: #d9534f;
      color: #fff;
      border: none;
      padding: 12px 18px;
      font-size: 0.9rem;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      z-index: 100;
    }
    .floating-urgent:hover {
      background-color: #c9302c;
    }
  </style>
</head>
<body>
  <section class="form-section">
    <h2>Qual serviço de eletricista está precisando?</h2>
    <div class="service-selector">
      <label for="tipoServico">Selecione uma opção:</label>
      <select id="tipoServico" name="tipoServico">
        <option value="">-- Escolha um serviço --</option>
        <option value="Restauração elétrica">Restauração elétrica</option>
        <option value="Instalação de CVE">Instalação de CVE (Carregador de veículo elétrico)</option>
        <option value="Sistema de Aterramento">Sistema de Aterramento</option>
        <option value="Outro">Outro (descreva abaixo)</option>
      </select>
      <input type="text" id="descricaoServico" name="descricaoServico"
        placeholder="Ou digite aqui qual suporte precisa" />
    </div>
    <div class="buttons">
      <button onclick="openForm('pedido')" class="primary">Enviar pedido</button>
      <button onclick="openForm('urgencia')" class="urgent">Serviço de urgência</button>
    </div>
    <div id="formContainer" class="form-container" style="display: none;">
      <form id="serviceForm" novalidate>
        <h3 id="formTitle">Solicitar serviço</h3>
        <div class="form-group">
          <label for="nome" class="required">Seu nome</label>
          <input type="text" id="nome" name="nome" required />
          <span class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="telefone" class="required">Telefone</label>
          <input type="tel" id="telefone" name="telefone" required pattern="[0-9()\s+\-]{10,}" />
          <span class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="email">E-mail</label>
          <input type="email" id="email" name="email" />
          <span class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="bairro" class="required">Bairro / Cidade</label>
          <input type="text" id="bairro" name="bairro" required />
          <span class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="tipo" class="required">Tipo de serviço</label>
          <input type="text" id="tipo" name="tipo" required />
          <span class="error-message"></span>
        </div>
        <div class="form-group">
          <label for="observacao">Observação relevante (opcional)</label>
          <textarea id="observacao" name="observacao"></textarea>
        </div>
        <button type="submit" class="primary">Enviar</button>
      </form>
    </div>
  </section>
  <button id="floatingUrgencia" class="floating-urgent" onclick="openForm('urgencia')">
    Serviço de Urgência
  </button>

  <script>
    // Lógica de exibição e validação do formulário.
    document.addEventListener('DOMContentLoaded', () => {
      const formContainer = document.getElementById('formContainer');
      const serviceForm = document.getElementById('serviceForm');
      const tipoField = document.getElementById('tipo');
      const tipoServico = document.getElementById('tipoServico');
      const descricao = document.getElementById('descricaoServico');
      const formTitle = document.getElementById('formTitle');

      function resetForm() {
        serviceForm.reset();
        const msgs = serviceForm.querySelectorAll('.error-message');
        msgs.forEach((m) => (m.textContent = ''));
        const inputs = serviceForm.querySelectorAll('input, textarea');
        inputs.forEach((f) => f.classList.remove('invalid'));
      }

      window.openForm = function (tipoSolicitacao) {
        resetForm();
        let valorTipo = '';
        if (tipoSolicitacao === 'urgencia') {
          valorTipo = 'Urgência';
          formTitle.textContent = 'Solicitação de urgência';
        } else {
          formTitle.textContent = 'Solicitação de serviço';
          valorTipo = tipoServico.value || descricao.value.trim();
        }
        tipoField.value = valorTipo;
        formContainer.style.display = 'block';
        formContainer.scrollIntoView({ behavior: 'smooth' });
      };

      serviceForm.addEventListener('submit', (event) => {
        event.preventDefault();
        let valid = true;
        serviceForm.querySelectorAll('[required]').forEach((field) => {
          const msg = field.parentElement.querySelector('.error-message');
          if (!field.value.trim()) {
            msg.textContent = 'Campo de preenchimento obrigatório';
            field.classList.add('invalid');
            valid = false;
            return;
          } else {
            msg.textContent = '';
            field.classList.remove('invalid');
          }
          if (field.id === 'telefone' && !field.checkValidity()) {
            msg.textContent = 'Telefone inválido';
            field.classList.add('invalid');
            valid = false;
          }
        });
        if (valid) {
          alert('Dados enviados com sucesso!');
          resetForm();
          formContainer.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>